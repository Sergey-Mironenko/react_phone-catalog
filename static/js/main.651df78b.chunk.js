(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{33:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var a=c(26),s=c.n(a),n=c(9),i=c(4),r=c(1),o=c.n(r),l=c(0),d=o.a.createContext({query:"",activeProduct:null,setQuery:function(){},setActiveProduct:function(){},chosenProducts:[],setChosenProducts:function(){},productsToBuy:[],setProductsToBuy:function(){},loadingItem:null,setLoadingItem:function(){}}),u=function(e){var t=e.children,c=Object(r.useState)(""),a=Object(i.a)(c,2),s=a[0],n=a[1],o=Object(r.useState)(null),u=Object(i.a)(o,2),j=u[0],b=u[1],_=Object(r.useState)([]),h=Object(i.a)(_,2),p=h[0],m=h[1],O=Object(r.useState)([]),v=Object(i.a)(O,2),x=v[0],f=v[1],N=Object(r.useState)(null),y=Object(i.a)(N,2),g={query:s,setQuery:n,activeProduct:j,setActiveProduct:b,chosenProducts:p,setChosenProducts:m,productsToBuy:x,setProductsToBuy:f,loadingItem:y[0],setLoadingItem:y[1]};return Object(l.jsx)(d.Provider,{value:g,children:t})},j=c(3),b=c(6),_=c.n(b),h=function(e,t){localStorage.setItem(e,JSON.stringify(t))},p=function(e){return JSON.parse(localStorage.getItem(e))||[]},m=function(e,t){localStorage.setItem(e,JSON.stringify(t))},O=function(e){return JSON.parse(localStorage.getItem(e))||[]},v=function(e){var t=e.filterType,c=e.filterQuery,a=e.updateSearch,s=Object(r.useContext)(d),i=s.query,o=s.setQuery;return Object(r.useMemo)((function(){c&&o(c)}),[c]),Object(l.jsxs)("header",{className:"header",id:"header",children:[Object(l.jsxs)("nav",{className:"header__nav",children:[Object(l.jsxs)("ul",{className:"header__list",children:[Object(l.jsx)("li",{children:Object(l.jsx)(n.c,{className:"header__link",to:"/home",children:Object(l.jsx)("div",{className:"header__image"})})}),Object(l.jsx)("li",{children:Object(l.jsx)(n.c,{className:function(e){var t=e.isActive;return _()("header__link",{"header__link--active":t})},to:"/",children:"HOME"})}),Object(l.jsx)("li",{children:Object(l.jsx)(n.c,{className:function(e){var t=e.isActive;return _()("header__link",{"header__link--active":t})},to:"/phones",children:"PHONES"})}),Object(l.jsx)("li",{children:Object(l.jsx)(n.c,{className:function(e){var t=e.isActive;return _()("header__link",{"header__link--active":t})},to:"/tablets",children:"TABLETS"})}),Object(l.jsx)("li",{children:Object(l.jsx)(n.c,{className:function(e){var t=e.isActive;return _()("header__link",{"header__link--active":t})},to:"/accessories",children:"ACCESSORIES"})})]}),Object(l.jsxs)("div",{className:"header__container",children:[Object(l.jsx)("input",{className:_()("header__filter",{"header__filter--active":""!==t}),type:"text",placeholder:"Search in ".concat(t,"..."),disabled:""===t,value:i,onChange:function(e){o(e.target.value),e.target.value?a({query:e.target.value}):a({query:null})}}),Object(l.jsxs)(n.c,{className:function(e){var t=e.isActive;return _()("header__button header__favourites",{"header__favourites--active":t})},to:"/favourites",children:[Object(l.jsx)("div",{className:"header__stroke"}),O("favourites").length>0&&Object(l.jsx)("div",{className:"header__circle",children:O("favourites").length})]}),Object(l.jsxs)(n.c,{className:function(e){var t=e.isActive;return _()("header__button header__cart",{"header__cart--active":t})},to:"/cart",children:[Object(l.jsx)("div",{className:"header__bag"}),p("toBuy").length>0&&Object(l.jsx)("div",{className:"header__circle",children:p("toBuy").length})]})]})]}),Object(l.jsx)("div",{className:"header__cover"})]})},x=function(e){var t=e.pathname,c=t.split("/");return Object(l.jsxs)("div",{className:"navigation",children:[Object(l.jsx)(n.c,{to:"/",children:Object(l.jsx)("div",{className:"navigation__icon"})}),Object(l.jsxs)("div",{className:"navigation__location",children:[Object(l.jsx)("div",{className:"navigation__arrow"}),Object(l.jsx)(n.c,{className:_()("navigation__link",{"navigation__link--active":t.slice(1)===c[1]}),to:"/".concat(c[1]),children:c[1][0].toUpperCase()+c[1].slice(1)}),void 0!==c[2]&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"navigation__arrow"}),Object(l.jsx)("div",{className:_()("navigation__link",{"navigation__link--active":t.split("/")[2]===c[2]}),children:c[2][0].toUpperCase()+c[2].slice(1)})]})]})]})},f=function(){var e=Object(r.useState)(1),t=Object(i.a)(e,2),c=t[0],a=t[1],s=function(e,t,s){a(c===t?e:c+s)};return Object(r.useEffect)((function(){var e=setInterval((function(){a((function(e){return 3===e?1:e+1}))}),5e3);return function(){return clearTimeout(e)}}),[c]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"slider slider--photos",children:[Object(l.jsx)("button",{type:"button","aria-label":"Scroll left",className:"slider__button slider__button--photos",onClick:function(){return s(3,1,-1)}}),Object(l.jsx)("div",{className:"slider__container",children:[1,2,3].map((function(e){return Object(l.jsx)("div",{className:_()("slider__photo",{"slider__photo--active":e===c})})}))}),Object(l.jsx)("button",{type:"button","aria-label":"Scroll right",className:"slider__button slider__button--photos",onClick:function(){return s(1,3,1)}})]}),Object(l.jsxs)("div",{className:"slider__indicator_container",children:[Object(l.jsx)("div",{className:_()("slider__indicator",{"slider__indicator--active":1===c})}),Object(l.jsx)("div",{className:_()("slider__indicator",{"slider__indicator--active":2===c})}),Object(l.jsx)("div",{className:_()("slider__indicator",{"slider__indicator--active":3===c})})]})]})},N=c(7),y=c(8),g=c(5),k=c.n(g),S=(c(33),function(){return Object(l.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(l.jsx)("div",{className:"Loader__content"})})}),C=function(e){var t=!1;return p("toBuy").forEach((function(c){return c.id===e?t=!0:t})),t},w=function(e){var t=!1;return O("favourites").length>0&&O("favourites").map((function(c){return c.id===e?t=!0:t})),t},B=function(e,t,c,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;c.preventDefault();var n=0;if(O("favourites").map((function(e,t){return e.id===a.id&&(n=t),null})),!1===w(a.id)){var i=[].concat(Object(N.a)(O("favourites")),[a]);e(i),m("favourites",i)}else{t(n);var r=[].concat(Object(N.a)(O("favourites").slice(0,n)),Object(N.a)(O("favourites").slice(n+1)));e(r),setTimeout((function(){m("favourites",r),t(null)}),s)}},A=function(e,t,c){if(t.preventDefault(),!1===C(c.id)){var a=[].concat(Object(N.a)(p("toBuy")),[{id:c.id,quantity:1,item:c}]);h("toBuy",a),e(a)}},T=function(e){var t=e.product,c=e.favouritesTimeout,a=Object(r.useContext)(d),s=a.setChosenProducts,i=a.setProductsToBuy,o=a.setLoadingItem;return t&&Object(l.jsx)(n.b,{className:"product__link",to:"/".concat(t.type,"s/").concat(t.id),onClick:function(){localStorage.setItem("product",JSON.stringify(t))},children:t&&Object(l.jsxs)("div",{className:"product",children:[Object(l.jsx)("img",{className:"product__image",src:t.imageUrl.split("phones").join("products"),alt:"".concat(t.id)}),Object(l.jsx)("h3",{className:"product__title",children:t.name}),Object(l.jsx)("div",{className:"product__price_container",children:0===t.discount?Object(l.jsx)("div",{className:"product__price",children:"$".concat(t.price)}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"product__price",children:"$".concat(t.price-t.price*t.discount/100)}),Object(l.jsx)("div",{className:"product__price product__price--old",children:"$".concat(t.price)})]})}),Object(l.jsx)("div",{className:"product__line"}),Object(l.jsxs)("div",{className:"product__info_container",children:[Object(l.jsx)("div",{className:"product__info",children:"Screen"}),Object(l.jsx)("div",{className:"product__info--value",children:t.screen||"-"})]}),Object(l.jsxs)("div",{className:"product__info_container",children:[Object(l.jsx)("div",{className:"product__info",children:"Capacity"}),Object(l.jsx)("div",{className:"product__info--value",children:t.capacity||"-"})]}),Object(l.jsxs)("div",{className:"product__info_container product__info_container--last",children:[Object(l.jsx)("div",{className:"product__info",children:"RAM"}),Object(l.jsx)("div",{className:"product__info--value",children:t.ram||"-"})]}),Object(l.jsxs)("div",{className:"product__button_container",children:[Object(l.jsx)("button",{type:"button",className:_()("product__button_add",{"product__button_add--active":!0===C(t.id)}),onClick:function(e){return A(i,e,t)},children:!0===C(t.id)?"Added to cart":"Add to cart"}),Object(l.jsx)("button",{type:"button","aria-label":"favourites",className:_()("product__button_favourites",{"product__button_favourites--active":w(t.id)}),onClick:function(e){return B(s,o,e,t,c)}})]})]})})};T.defaultProps={favouritesTimeout:0};var P="https://mate-academy.github.io/react_phone-catalog/api";function q(e){return new Promise((function(t){setTimeout(t,e)}))}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:t};return c&&(a.body=JSON.stringify(c),a.headers={"Content-Type":"application/json; charset=UTF-8"}),q(300).then((function(){return fetch(P+e,a)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var F,E=function(e){return I(e)},L=function(){return E("/products.json")},R=function(e){var t=e.pathname,c=e.title,a=e.dicount,s=e.random,n=Object(r.useState)(0),o=Object(i.a)(n,2),d=o[0],u=o[1],j=Object(r.useState)(!1),b=Object(i.a)(j,2),h=b[0],p=b[1],m=Object(r.useState)(!1),O=Object(i.a)(m,2),v=O[0],x=O[1],f=Object(r.useState)([]),g=Object(i.a)(f,2),C=g[0],w=g[1],B=1188,A=272*C.length+25*(C.length-1),P=function(){var e=Object(y.a)(k.a.mark((function e(){var t,c,n,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),x(!1),e.prev=2,e.next=5,L();case 5:t=e.sent,a&&!s&&w(Object(N.a)(t).filter((function(e){return e.discount>0})).sort((function(e,t){return t.price-t.price*t.discount/100-(e.price-e.price*e.discount/100)}))),a||s||w(Object(N.a)(t).filter((function(e){return e.discount<=0})).sort((function(e,t){return t.price-e.price}))),!a&&s&&(c=[],n=t.length,i=Object(N.a)(Array(n)).map((function(e,t){return t})),Object(N.a)(Array(n)).map((function(){return i.splice(Math.floor(Math.random()*i.length),1)[0]})).map((function(e){return c.push(t[e])})),w(c)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),x(!1);case 14:return e.prev=14,p(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){P()}),[t]),Object(l.jsx)("div",{className:"slider slider--phones",children:Object(l.jsxs)("div",{className:"slider__content",children:[Object(l.jsxs)("div",{className:"slider__top",children:[Object(l.jsx)("h2",{className:"slider__subtitle",children:c}),Object(l.jsxs)("div",{className:"slider__button_container",children:[Object(l.jsx)("button",{type:"button","aria-label":"Left scroll",className:_()("slider__button slider__button--phones",{"slider__button--disabled":d>-1}),disabled:d>-1,onClick:function(){u(d+B)}}),Object(l.jsx)("button",{type:"button","aria-label":"Right scroll",className:_()("slider__button slider__button--phones",{"slider__button--disabled":d-B<-A}),disabled:d-B<-A,onClick:function(){if(1163<A){var e=d-B;e-B<=-A&&u(1163-A),u(e)}}})]})]}),h&&Object(l.jsx)(S,{}),v&&Object(l.jsx)("p",{children:"No phones"}),Object(l.jsx)("div",{className:"slider__container",children:Object(l.jsx)("div",{className:"slider__photos slider__photos--phones",style:{transform:"translate(".concat(d,"px, 0)"),transition:"transform 1.2s"},children:!h&&!v&&C.map((function(e){return Object(l.jsx)(T,{product:e})}))})})]})})},M=function(){var e=Object(r.useState)(0),t=Object(i.a)(e,2),c=t[0],a=t[1],s=Object(r.useState)(0),o=Object(i.a)(s,2),d=o[0],u=o[1],j=Object(r.useState)(0),b=Object(i.a)(j,2),_=b[0],h=b[1],p=function(){var e=Object(y.a)(k.a.mark((function e(t,c){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L();case 3:a=e.sent,t(Object(N.a)(a).filter((function(e){return e.type===c})).length),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){p(a,"phone"),p(u,"tablet"),p(h,"accessories")}),[]),Object(l.jsxs)("div",{className:"shopBy",children:[Object(l.jsx)("h2",{className:"shopBy__title",children:"Shop by category"}),Object(l.jsxs)("div",{className:"shopBy__content",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"shopBy__photo_container",children:Object(l.jsx)("div",{className:"shopBy__photo shopBy__photo--phones"})}),Object(l.jsx)(n.b,{className:"shopBy__link",to:"/phones",children:"Mobile phones"}),Object(l.jsxs)("div",{className:"shopBy__text",children:[c,1===c?"model":"models"]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"shopBy__photo_container",children:Object(l.jsx)("div",{className:"shopBy__photo shopBy__photo--tablets"})}),Object(l.jsx)(n.b,{className:"shopBy__link",to:"/tablets",children:"Tablets"}),Object(l.jsxs)("div",{className:"shopBy__text",children:[d,1===d?"model":"models"]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"shopBy__photo_container",children:Object(l.jsx)("div",{className:"shopBy__photo shopBy__photo--accessories"})}),Object(l.jsx)(n.b,{className:"shopBy__link",to:"/accessories",children:"Accessories"}),Object(l.jsxs)("div",{className:"shopBy__text",children:[_,1===_?"model":"models"]})]})]})]})},G=function(e){var t=e.pathname;return Object(l.jsx)("div",{className:"home",children:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(f,{}),Object(l.jsx)(R,{pathname:t,title:"Hot prices",dicount:!0,random:!1}),Object(l.jsx)(M,{}),Object(l.jsx)(R,{pathname:t,title:"Brand new models",dicount:!1,random:!1})]})})};function $(e,t){for(var c=[],a=e;a<=t;a+=1)c.push(a);return c}!function(e){e.newest="Newest",e.alphabetically="Alphabetically",e.cheapest="Cheapest"}(F||(F={}));var J=function(e){var t=e.productType;return Object(l.jsx)("h2",{className:"noResults",children:"".concat(t," not found")})},D=function(e){var t=e.productType,c=e.pathname,a=e.type,s=e.updateSearch,n=e.page,o=e.perPage,u=e.sort,j=Object(r.useContext)(d).query,b=Object(r.useState)([]),h=Object(i.a)(b,2),p=h[0],m=h[1],O=Object(r.useState)(8),v=Object(i.a)(O,2),x=v[0],f=v[1],g=Object(r.useState)(1),C=Object(i.a)(g,2),w=C[0],B=C[1],A=Object(r.useState)(!1),P=Object(i.a)(A,2),q=P[0],I=P[1],E=Object(r.useState)(!1),R=Object(i.a)(E,2),M=R[0],G=R[1],D=Object(r.useState)("Newest"),U=Object(i.a)(D,2),Q=U[0],H=U[1],z=Object(r.useState)(!1),Y=Object(i.a)(z,2),K=Y[0],V=Y[1],W=Object(r.useState)(!1),X=Object(i.a)(W,2),Z=X[0],ee=X[1],te=Object(N.a)(p),ce=0,ae=Object(N.a)(p),se=function(){var e=Object(y.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),ee(!1),e.prev=2,e.next=5,L();case 5:t=e.sent,m(Object(N.a)(t).filter((function(e){return e.type===a}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),ee(!1);case 12:return e.prev=12,V(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),ne=function(e){B(e)},ie=function(e){H(e),I(!1),s({sort:String(e.toLowerCase()),page:String(1)})},re=function(e){f(e),G(!1),B(1),s({page:String(1),perPage:String(e)})};return Object(r.useEffect)((function(){return se(),s({page:null,perPage:null,sort:null})}),[c]),Object(r.useMemo)((function(){c&&(u&&H(u[0].toUpperCase()+u.slice(1)),n&&B(Number(n)),o&&f(Number(o)),I(!1),G(!1))}),[u,n,o,c]),j&&(te=te.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())}))),Q===F.newest&&te.sort((function(e,t){return e.age-t.age})),Q===F.alphabetically&&te.sort((function(e,t){return e.name.localeCompare(t.name)})),Q===F.cheapest&&te.sort((function(e,t){return e.price-t.price})),ce=Math.ceil(te.length/x),ae=Object(N.a)(te).slice(x*w-x,x*w),Object(l.jsxs)("div",{className:"products",children:[Object(l.jsx)("h1",{className:"products__title",children:"".concat(t)}),K&&Object(l.jsx)("div",{className:"products__amount",children:"0 models"}),!K&&!Z&&Object(l.jsx)("div",{className:"products__amount",children:"".concat(p.length," models")}),Object(l.jsxs)("div",{className:"products__filter_container",children:[Object(l.jsxs)("div",{className:"products__filter",children:[Object(l.jsx)("div",{className:"products__text",children:"Sort by"}),Object(l.jsx)("button",{type:"button",className:"products__dropdown",onClick:function(){I(!q)},children:Q}),Object(l.jsx)("div",{className:"products__cover"}),Object(l.jsxs)("ul",{className:_()("products__dropdown_list",{"products__dropdown_list--active":q}),children:[Object(l.jsx)("li",{className:"products__dropdown_item ",children:Object(l.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return ie(F.newest)},children:"Newest"})}),Object(l.jsx)("li",{className:"products__dropdown_item",children:Object(l.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return ie(F.alphabetically)},children:"Alphabetically"})}),Object(l.jsx)("li",{className:"products__dropdown_item",children:Object(l.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return ie(F.cheapest)},children:"Cheapest"})})]})]}),Object(l.jsxs)("div",{className:"products__filter",children:[Object(l.jsx)("div",{className:"products__text",children:"Items on page"}),Object(l.jsx)("button",{type:"button",className:"products__dropdown",onClick:function(){G(!M)},children:x}),Object(l.jsx)("div",{className:"products__cover"}),Object(l.jsxs)("ul",{className:_()("products__dropdown_list",{"products__dropdown_list--active":M}),children:[Object(l.jsx)("li",{className:"products__dropdown_item",children:Object(l.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return re(4)},children:"4"})}),Object(l.jsx)("li",{className:"products__dropdown_item",children:Object(l.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return re(8)},children:"8"})}),Object(l.jsx)("li",{className:"products__dropdown_item",children:Object(l.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return re(16)},children:"16"})})]})]})]}),K&&Object(l.jsx)(S,{}),Z&&Object(l.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}),!K&&!Z&&te.length>0&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"products__container",children:Object(l.jsx)("div",{className:"products__list",children:ae.map((function(e){return Object(l.jsx)(T,{product:e},e.id)}))})}),te.length>x&&Object(l.jsxs)("div",{className:"products__page_container",children:[Object(l.jsx)("li",{className:"products__page",children:Object(l.jsx)("button",{type:"button","data-cy":"prevLink",className:_()("products__page_link",{"products__page_link--disabled":w<=1}),disabled:w<=1,onClick:function(e){e.preventDefault(),w>=2&&ne(w-1),s({page:String(w-1)})},children:"\xab"})}),$(1,ce).map((function(e){return Object(l.jsx)("li",{className:"products__page",children:Object(l.jsx)("button",{type:"button","data-cy":"pageLink",className:_()("products__page_link",{"products__page_link--active":w===e}),onClick:function(t){t.preventDefault(),ne(e),s({page:String(e)})},children:e})},e)})),Object(l.jsx)("li",{className:"products__page",children:Object(l.jsx)("button",{type:"button","data-cy":"nextLink",className:_()("products__page_link",{"products__page_link--disabled":w>ce-1}),disabled:w>ce-1,"aria-disabled":w>ce-1?"true":"false",onClick:function(e){e.preventDefault(),w<=ce-1&&ne(w+1),s({page:String(w+1)})},children:"\xbb"})})]})]}),!K&&!Z&&0===te.length&&Object(l.jsx)(J,{productType:t})]})},U=function(){var e=Object(j.o)();return Object(l.jsxs)("div",{className:"goGack",children:[Object(l.jsx)("div",{className:"goGack__arrow"}),Object(l.jsx)("button",{type:"button","data-cy":"backButton","aria-label":"Go back",className:"goGack__button",onClick:function(){return e(-1)},children:"Back"})]})},Q=function(e){var t=e.pathname,c=e.favouritesTimeout,a=["#f0f0f0","#000","#62849c","#96999b"],s=Object(r.useContext)(d),n=s.setChosenProducts,o=s.setProductsToBuy,u=s.setLoadingItem,j=Object(r.useState)(!1),b=Object(i.a)(j,2),h=b[0],p=b[1],m=Object(r.useState)(!1),O=Object(i.a)(m,2),v=O[0],x=O[1],f=Object(r.useState)(null),N=Object(i.a)(f,2),g=N[0],T=N[1],P=Object(r.useState)(null===g||void 0===g?void 0:g.images[0]),q=Object(i.a)(P,2),I=q[0],F=q[1],L=Object(r.useState)(a[0]),M=Object(i.a)(L,2),G=M[0],$=M[1],J=Object(r.useState)(64),D=Object(i.a)(J,2),Q=D[0],H=D[1],z=Object(r.useState)(!1),Y=Object(i.a)(z,2),K=Y[0],V=Y[1],W=JSON.parse(localStorage.getItem("product")),X=null===g||void 0===g?void 0:g.display.screenResolution.slice((null===g||void 0===g?void 0:g.display.screenResolution.indexOf("("))+1,(null===g||void 0===g?void 0:g.display.screenResolution.length)-1),Z=null===g||void 0===g?void 0:g.display.screenResolution.slice(0,null===g||void 0===g?void 0:g.display.screenResolution.indexOf("(")),ee=null===g||void 0===g?void 0:g.display.screenSize.slice(0,null===g||void 0===g?void 0:g.display.screenSize.indexOf(" ")),te=null===g||void 0===g?void 0:g.camera.primary.slice(0,null===g||void 0===g?void 0:g.camera.primary.indexOf(" ")),ce=function(e){return null===e||void 0===e?void 0:e.split("phones").join("products")},ae=function(){var e=Object(y.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),x(!1),e.prev=2,e.next=5,c=W.id,E("/products/".concat(c,".json"));case 5:t=e.sent,T(t),F(ce(t.images[0])),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),x(!1);case 13:return e.prev=13,p(!1),e.finish(13);case 16:case"end":return e.stop()}var c}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){ae()}),[]),Object(l.jsxs)("div",{className:"details",children:[Object(l.jsx)(U,{}),Object(l.jsx)("h1",{className:"details__title",children:null===W||void 0===W?void 0:W.name}),h&&Object(l.jsx)(S,{}),v&&Object(l.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}),!h&&!v&&W&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"details__product",children:[Object(l.jsx)("div",{className:"details__photo_container",children:null===g||void 0===g?void 0:g.images.map((function(e){return Object(l.jsx)("button",{type:"button","aria-label":"image",className:_()("details__small_photo",{"details__small_photo--active":ce(e)===I}),style:{backgroundImage:"url(".concat(ce(e),")")},onClick:function(){F(ce(e))}},e)}))}),Object(l.jsx)("button",{type:"button","aria-label":"big image",className:_()("details__photo",{"details__photo--active":K}),style:{backgroundImage:"url(".concat(I,")")},onClick:function(){return V(!K)}}),Object(l.jsxs)("div",{className:"details__characteristics",children:[Object(l.jsx)("h6",{className:"details__subtitle",children:"Available colors"}),Object(l.jsx)("div",{className:"details__color_container",children:a.map((function(e){return Object(l.jsx)("button",{type:"button",className:"details__color_button",disabled:G===e,onClick:function(){return $(e)},children:Object(l.jsx)("div",{className:_()("details__color_border",{"details__color_border--active":G===e}),children:Object(l.jsx)("div",{className:"details__color",style:{backgroundColor:"".concat(e)}})})},e)}))}),Object(l.jsx)("div",{className:"details__line"}),Object(l.jsx)("h6",{className:"details__subtitle",children:"Select capacity"}),Object(l.jsxs)("div",{className:"details__capacity_container",children:[Object(l.jsx)("button",{type:"button",className:"details__capacity_button",onClick:function(){H(64)},children:Object(l.jsx)("div",{className:_()("details__capacity",{"details__capacity--active":64===Q}),children:"64 GB"})}),Object(l.jsx)("button",{type:"button",className:"details__capacity_button",onClick:function(){H(256)},children:Object(l.jsx)("div",{className:_()("details__capacity",{"details__capacity--active":256===Q}),children:"256 GB"})}),Object(l.jsx)("button",{type:"button",className:"details__capacity_button",onClick:function(){H(512)},children:Object(l.jsx)("div",{className:_()("details__capacity",{"details__capacity--active":512===Q}),children:"512 GB"})})]}),Object(l.jsx)("div",{className:"details__line"}),Object(l.jsxs)("div",{className:"details__price_container",children:[0===W.discount&&Object(l.jsx)("div",{className:"details__price",children:"$".concat(W.price)}),W.price&&0!==W.discount&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"details__price",children:"$".concat(W.price-W.price*W.discount/100)}),Object(l.jsx)("div",{className:"details__price_old",children:"$".concat(W.price)})]})]}),Object(l.jsxs)("div",{className:"details__button_container",children:[Object(l.jsx)("button",{type:"button",className:_()("details__button_add",{"details__button_add--active":!0===C(W.id)}),onClick:function(e){return A(o,e,W)},children:!0===C(W.id)?"Added to cart":"Add to cart"}),Object(l.jsx)("button",{type:"button","aria-label":"favourites",className:_()("details__button_favourites",{"details__button_favourites--active":w(W.id)}),onClick:function(e){return B(n,u,e,W,c)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"details__description_container",children:[Object(l.jsx)("div",{className:"details__description",children:"Screen"}),Object(l.jsx)("div",{className:"details__value",children:"".concat(Z," ").concat(ee)||"-"})]}),Object(l.jsxs)("div",{className:"details__description_container",children:[Object(l.jsx)("div",{className:"details__description",children:"Resolution"}),Object(l.jsx)("div",{className:"details__value",children:X||"-"})]}),Object(l.jsxs)("div",{className:"details__description_container",children:[Object(l.jsx)("div",{className:"details__description",children:"Processor"}),Object(l.jsx)("div",{className:"details__value",children:(null===g||void 0===g?void 0:g.hardware.cpu)||"-"})]}),Object(l.jsxs)("div",{className:"details__description_container",children:[Object(l.jsx)("div",{className:"details__description",children:"RAM"}),Object(l.jsx)("div",{className:"details__value",children:(null===g||void 0===g?void 0:g.storage.ram)||"-"})]})]})]}),Object(l.jsx)("div",{className:"details__id",children:"ID: 802390"}),Object(l.jsxs)("div",{className:"details__about",children:[Object(l.jsx)("div",{className:"details__about_title",children:"About"}),Object(l.jsx)("div",{className:"details__line"}),(null===g||void 0===g?void 0:g.additionalFeatures)&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"details__about_subtitle",children:"Additional Features"}),Object(l.jsx)("p",{className:"details__about_text",children:null===g||void 0===g?void 0:g.additionalFeatures})]}),(null===g||void 0===g?void 0:g.description)&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"details__about_subtitle",children:"Description"}),Object(l.jsx)("p",{className:"details__about_text",children:null===g||void 0===g?void 0:g.description})]})]}),Object(l.jsxs)("div",{className:"details__about--techSpecs",children:[Object(l.jsx)("div",{className:"details__about_title",children:"Tech specs"}),Object(l.jsx)("div",{className:"details__line"}),Object(l.jsxs)("div",{className:"details__about_specs",children:[Object(l.jsxs)("div",{className:"details__about_container",children:[Object(l.jsx)("div",{className:"details__about_spec",children:"Screen"}),Object(l.jsx)("div",{className:"details__about_value",children:"".concat(Z," ").concat(ee)||"-"})]}),Object(l.jsxs)("div",{className:"details__about_container",children:[Object(l.jsx)("div",{className:"details__about_spec",children:"Resolution"}),Object(l.jsx)("div",{className:"details__about_value",children:X||"-"})]}),Object(l.jsxs)("div",{className:"details__about_container",children:[Object(l.jsx)("div",{className:"details__about_spec",children:"Processor"}),Object(l.jsx)("div",{className:"details__about_value",children:(null===g||void 0===g?void 0:g.hardware.cpu)||"-"})]}),Object(l.jsxs)("div",{className:"details__about_container",children:[Object(l.jsx)("div",{className:"details__about_spec",children:"RAM"}),Object(l.jsx)("div",{className:"details__about_value",children:(null===g||void 0===g?void 0:g.storage.ram)||"-"})]}),Object(l.jsxs)("div",{className:"details__about_container",children:[Object(l.jsx)("div",{className:"details__about_spec",children:"Built in memory"}),Object(l.jsx)("div",{className:"details__about_value",children:(null===g||void 0===g?void 0:g.storage.flash)||"-"})]}),Object(l.jsxs)("div",{className:"details__about_container",children:[Object(l.jsx)("div",{className:"details__about_spec",children:"Camera"}),Object(l.jsx)("div",{className:"details__about_value",children:"".concat(te," Mp")||!1})]})]})]})]}),Object(l.jsx)(R,{pathname:t,title:"You may also like",dicount:!1,random:!0})]}),!h&&!v&&!W&&Object(l.jsx)("h3",{children:"No product"}),Object(l.jsx)("div",{className:_()("details__cover",{"details__cover--active":!0===K})})]})};Q.defaultProps={favouritesTimeout:0};var H,z=function(){var e=Object(r.useContext)(d),t=e.loadingItem,c=e.query,a=Object(r.useState)(!1),s=Object(i.a)(a,2),n=s[0],o=s[1],u=O("favourites").filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())}));return Object(r.useEffect)((function(){o(!0),setTimeout((function(){o(!1)}),500)}),[]),Object(l.jsxs)("div",{className:"favourites",children:[Object(l.jsx)("h1",{className:"favourites__title",children:"Favourites"}),n?Object(l.jsx)("div",{className:"favourites__amount",children:"0 models"}):Object(l.jsx)("div",{className:"favourites__amount",children:1!==u.length?"".concat(u.length," models"):"".concat(u.length," model")}),Object(l.jsx)("div",{className:"favourites__container",children:Object(l.jsxs)("div",{className:"favourites__list",children:[n&&Object(l.jsx)("div",{className:"favourites__loader_container",children:Object(l.jsx)(S,{})}),u.length>0&&!n&&u.map((function(e,c){return c!==t?Object(l.jsx)(T,{product:e,favouritesTimeout:1e3},e.id):Object(l.jsxs)("div",{className:"favourites__list_container",children:[Object(l.jsx)(T,{product:e},e.id),Object(l.jsx)("div",{className:"favourites__list_loader",children:Object(l.jsx)(S,{})})]})})),0===O("favourites").length&&!n&&Object(l.jsx)("h2",{className:"favourites__title favourites__title--error",children:"Favourites not found"})]})})]})},Y=c(25),K=function(){var e=Object(r.useContext)(d),t=e.setProductsToBuy,c=e.loadingItem,a=e.setLoadingItem,s=Object(r.useState)(!1),n=Object(i.a)(s,2),o=n[0],u=n[1],j=function(e){a(e),setTimeout((function(){var c=[].concat(Object(N.a)(p("toBuy").slice(0,e)),Object(N.a)(p("toBuy").slice(e+1)));h("toBuy",c),t(c),a(null)}),1e3)},b=function(e,c,a){var s=Object(Y.a)(Object(Y.a)({},a),{},{quantity:c}),n=[].concat(Object(N.a)(p("toBuy").slice(0,e)),[s],Object(N.a)(p("toBuy").slice(e+1)));h("toBuy",n),t(n)},m=function(e,t){return e-e*t/100},O=function(){var e=0;return p("toBuy").forEach((function(t){e+=t.quantity})),e};return Object(r.useEffect)((function(){u(!0),setTimeout((function(){u(!1)}),500)}),[]),Object(l.jsxs)("div",{className:"cart",children:[Object(l.jsx)(U,{}),Object(l.jsx)("h1",{className:"cart__title",children:"Cart"}),o&&Object(l.jsx)("div",{className:"cart__loader_container",children:Object(l.jsx)(S,{})}),p("toBuy").length>0&&!o&&Object(l.jsxs)("div",{className:"cart__container",children:[Object(l.jsx)("div",{className:"cart__products",children:p("toBuy").map((function(e,t){return t!==c?Object(l.jsxs)("div",{className:"cart__item",children:[Object(l.jsxs)("div",{className:"cart__content",children:[Object(l.jsx)("button",{type:"button","aria-label":"Delete",className:"cart__button",onClick:function(){return j(t)}}),Object(l.jsx)("img",{className:"cart__image",src:e.item.imageUrl.split("phones").join("products"),alt:"".concat(e.item.id)}),Object(l.jsx)("h4",{className:"cart__subtitle",children:e.item.name})]}),Object(l.jsxs)("div",{className:"cart__amount",children:[Object(l.jsxs)("div",{className:"cart__quantity",children:[Object(l.jsx)("button",{type:"button","aria-label":"Remove",className:_()("cart__changeAmount cart__remove",{"cart__changeAmount--disabled":e.quantity<2}),disabled:e.quantity<2,onClick:function(){return b(t,e.quantity-1,e)}}),Object(l.jsx)("div",{className:"cart__number",children:e.quantity}),Object(l.jsx)("button",{type:"button","aria-label":"Add",className:_()("cart__changeAmount cart__add",{"cart__changeAmount--disabled":e.quantity>4}),disabled:e.quantity>4,onClick:function(){return b(t,e.quantity+1,e)}})]}),0===e.item.discount?Object(l.jsx)("div",{className:"cart__price",children:"$".concat(e.item.price)}):Object(l.jsx)("div",{className:"cart__price",children:"$".concat(m(e.item.price,e.item.discount))})]})]}):Object(l.jsxs)("div",{className:"cart__list_container",children:[Object(l.jsxs)("div",{className:"cart__item",children:[Object(l.jsxs)("div",{className:"cart__content",children:[Object(l.jsx)("button",{type:"button","aria-label":"Delete",className:"cart__button",onClick:function(){return j(t)}}),Object(l.jsx)("img",{className:"cart__image",src:e.item.imageUrl.split("phones").join("products"),alt:"".concat(e.item.id)}),Object(l.jsx)("h4",{className:"cart__subtitle",children:e.item.name})]}),Object(l.jsxs)("div",{className:"cart__amount",children:[Object(l.jsxs)("div",{className:"cart__quantity",children:[Object(l.jsx)("button",{type:"button","aria-label":"Remove",className:_()("cart__changeAmount cart__remove",{"cart__changeAmount--disabled":e.quantity<2}),disabled:e.quantity<2,onClick:function(){return b(t,e.quantity-1,e)}}),Object(l.jsx)("div",{className:"cart__number",children:e.quantity}),Object(l.jsx)("button",{type:"button","aria-label":"Add",className:_()("cart__changeAmount cart__add",{"cart__changeAmount--disabled":e.quantity>4}),disabled:e.quantity>4,onClick:function(){return b(t,e.quantity+1,e)}})]}),0===e.item.discount?Object(l.jsx)("div",{className:"cart__price",children:"$".concat(e.item.price)}):Object(l.jsx)("div",{className:"cart__price",children:"$".concat(m(e.item.price,e.item.discount))})]})]}),Object(l.jsx)("div",{className:"cart__list_loader",children:Object(l.jsx)(S,{})})]})}))}),Object(l.jsxs)("div",{className:"cart__checkout",children:[Object(l.jsx)("h2",{className:"cart__totalCost",children:"$".concat(function(){var e=0;return p("toBuy").forEach((function(t){0===t.item.discount?e+=t.item.price*t.quantity:e+=m(t.item.price,t.item.discount)*t.quantity})),e}())}),Object(l.jsx)("div",{className:"cart__totalQuantity",children:"Total for ".concat(O()," ").concat(1===O()?"item":"items")}),Object(l.jsx)("div",{className:"cart__line"}),Object(l.jsx)("button",{type:"button","aria-label":"checkout",className:"cart__mainButton",children:"Checkout"})]})]}),0===p("toBuy").length&&!o&&Object(l.jsx)("h2",{className:"cart__title cart__title--error",children:"Products not found"})]})},V=function(){return Object(l.jsxs)("footer",{className:"footer",children:[Object(l.jsx)("div",{className:"footer__content",children:Object(l.jsx)("div",{className:"footer__image"})}),Object(l.jsx)("div",{className:"footer__content",children:Object(l.jsxs)("div",{className:"footer__link_container",children:[Object(l.jsx)(n.b,{to:"/",className:"footer__link",children:"GITHUB"}),Object(l.jsx)(n.b,{to:"/",className:"footer__link",children:"CONTACTS"}),Object(l.jsx)(n.b,{to:"/",className:"footer__link",children:"RIGHTS"})]})}),Object(l.jsxs)("div",{className:"footer__button_container",children:[Object(l.jsx)("div",{className:"footer__content",children:Object(l.jsx)("div",{className:"footer__button_text",children:"Back to top"})}),Object(l.jsx)("button",{type:"button","aria-label":"Scroll top",className:"footer__button"})]})]})};!function(e){e.phones="Mobile Phones",e.tablets="Tablets",e.accessories="Accessories"}(H||(H={}));var W=function(){var e=Object(r.useContext)(d).setQuery,t=Object(j.m)().pathname,c=Object(j.o)(),a=Object(n.d)(),s=Object(i.a)(a,2),o=s[0],u=s[1],b=Object(r.useState)(""),_=Object(i.a)(b,2),h=_[0],p=_[1],m=o.get("page"),O=o.get("perPage"),f=o.get("sort"),N=o.get("query"),y=JSON.parse(localStorage.getItem("product"))||null,g=function(e){Object.entries(e).forEach((function(e){var t=Object(i.a)(e,2),c=t[0],a=t[1];null===a?o.delete(c):Array.isArray(a)?(o.delete(c),a.forEach((function(e){o.append(c,String(e))}))):o.set(c,a),u(o)}))};return Object(r.useMemo)((function(){p("/phones"===t?"phones":"/tablets"===t?"tablets":"/accessories"===t?"accessories":"/favourites"===t?"favourites":""),e(""),g({query:null}),c(-1)}),[t]),Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)(v,{filterType:h,filterQuery:N,updateSearch:g}),Object(l.jsx)("main",{style:{flexGrow:1},children:Object(l.jsxs)(j.d,{children:[Object(l.jsx)(j.b,{path:"/",element:Object(l.jsx)(G,{pathname:t})}),Object(l.jsx)(j.b,{path:"/home",element:Object(l.jsx)(j.a,{to:"/",replace:!0})}),Object(l.jsx)(j.b,{path:"/phones",element:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{pathname:t}),Object(l.jsx)(D,{productType:H.phones,pathname:t,type:"phone",updateSearch:g,page:m,sort:f,perPage:O})]})}),Object(l.jsx)(j.b,{path:"/phones/:".concat(null===y||void 0===y?void 0:y.id),element:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{pathname:t}),Object(l.jsx)(Q,{pathname:t})]})}),Object(l.jsx)(j.b,{path:"/tablets",element:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{pathname:t}),Object(l.jsx)(D,{productType:H.tablets,pathname:t,type:"tablet",updateSearch:g,page:m,sort:f,perPage:O})]})}),Object(l.jsx)(j.b,{path:"/tablets/:".concat(null===y||void 0===y?void 0:y.id),element:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{pathname:t}),Object(l.jsx)(Q,{pathname:t})]})}),Object(l.jsx)(j.b,{path:"/accessories",element:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{pathname:t}),Object(l.jsx)(D,{productType:H.accessories,pathname:t,type:"accessory",updateSearch:g,page:m,sort:f,perPage:O})]})}),Object(l.jsx)(j.b,{path:"/accessories/:".concat(null===y||void 0===y?void 0:y.id),element:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{pathname:t}),Object(l.jsx)(Q,{pathname:t})]})}),Object(l.jsx)(j.b,{path:"/favourites",element:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(x,{pathname:t}),Object(l.jsx)(z,{})]})}),Object(l.jsx)(j.b,{path:"/cart",element:Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(K,{})})}),Object(l.jsx)(j.b,{path:"/*",element:Object(l.jsx)("p",{children:"Page not found"})})]})}),Object(l.jsx)(V,{})]})};c(34);s.a.render(Object(l.jsx)(n.a,{children:Object(l.jsx)(u,{children:Object(l.jsx)(W,{})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.651df78b.chunk.js.map