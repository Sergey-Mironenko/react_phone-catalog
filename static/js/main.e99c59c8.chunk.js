(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{33:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var s,a=c(26),i=c.n(a),n=c(8),r=c(4),o=c(1),l=c.n(o),d=c(0),u=l.a.createContext({query:"",activeProduct:null,setQuery:function(){},setActiveProduct:function(){},chosenProducts:[],setChosenProducts:function(){},productsToBuy:[],setProductsToBuy:function(){},loadingItem:null,setLoadingItem:function(){}}),j=function(e){var t=e.children,c=Object(o.useState)(""),s=Object(r.a)(c,2),a=s[0],i=s[1],n=Object(o.useState)(null),l=Object(r.a)(n,2),j=l[0],b=l[1],_=Object(o.useState)([]),h=Object(r.a)(_,2),p=h[0],O=h[1],m=Object(o.useState)([]),v=Object(r.a)(m,2),x=v[0],f=v[1],N=Object(o.useState)(null),y=Object(r.a)(N,2),g={query:a,setQuery:i,activeProduct:j,setActiveProduct:b,chosenProducts:p,setChosenProducts:O,productsToBuy:x,setProductsToBuy:f,loadingItem:y[0],setLoadingItem:y[1]};return Object(d.jsx)(u.Provider,{value:g,children:t})},b=c(3),_=c(6),h=c.n(_),p=function(){var e=Object(n.d)(),t=Object(r.a)(e,2),c=t[0],s=t[1];return{updateSearch:function(e){Object.entries(e).forEach((function(e){var t=Object(r.a)(e,2),a=t[0],i=t[1];null===i?c.delete(a):Array.isArray(i)?(c.delete(a),i.forEach((function(e){c.append(a,String(e))}))):c.set(a,i),s(c)}))},searchParams:c}},O=function(e,t){localStorage.setItem(e,JSON.stringify(t))},m=function(e){return JSON.parse(localStorage.getItem(e))||[]},v=function(e,t){localStorage.setItem(e,JSON.stringify(t))},x=function(e){return JSON.parse(localStorage.getItem(e))||[]};!function(e){e.toBuy="toBuy",e.favourites="favourites",e.product="product"}(s||(s={}));var f=function(e){var t=e.filterType,c=e.filterQuery,a=Object(o.useContext)(u),i=a.query,r=a.setQuery,l=p().updateSearch;return Object(o.useEffect)((function(){c&&r(c)}),[c]),Object(d.jsxs)("header",{className:"header",id:"header",children:[Object(d.jsxs)("nav",{className:"header__nav",children:[Object(d.jsxs)("ul",{className:"header__list",children:[Object(d.jsx)("li",{children:Object(d.jsx)(n.c,{className:"header__link",to:"/",children:Object(d.jsx)("div",{className:"header__image"})})}),Object(d.jsx)("li",{children:Object(d.jsx)(n.c,{className:function(e){var t=e.isActive;return h()("header__link",{"header__link--active":t})},to:"/",children:"HOME"})}),Object(d.jsx)("li",{children:Object(d.jsx)(n.c,{className:function(e){var t=e.isActive;return h()("header__link",{"header__link--active":t})},to:"/phones",children:"PHONES"})}),Object(d.jsx)("li",{children:Object(d.jsx)(n.c,{className:function(e){var t=e.isActive;return h()("header__link",{"header__link--active":t})},to:"/tablets",children:"TABLETS"})}),Object(d.jsx)("li",{children:Object(d.jsx)(n.c,{className:function(e){var t=e.isActive;return h()("header__link",{"header__link--active":t})},to:"/accessories",children:"ACCESSORIES"})})]}),Object(d.jsxs)("div",{className:"header__container",children:[Object(d.jsx)("input",{className:h()("header__filter",{"header__filter--active":""!==t}),type:"text",placeholder:"Search in ".concat(t,"..."),disabled:""===t,value:i,onChange:function(e){r(e.target.value),e.target.value?l({query:e.target.value}):l({query:null})}}),Object(d.jsxs)(n.c,{className:function(e){var t=e.isActive;return h()("header__button header__favourites",{"header__favourites--active":t})},to:"/favourites",children:[Object(d.jsx)("div",{className:"header__stroke"}),x(s.favourites).length>0&&Object(d.jsx)("div",{className:"header__circle",children:x(s.favourites).length})]}),Object(d.jsxs)(n.c,{className:function(e){var t=e.isActive;return h()("header__button header__cart",{"header__cart--active":t})},to:"/cart",children:[Object(d.jsx)("div",{className:"header__bag"}),m(s.toBuy).length>0&&Object(d.jsx)("div",{className:"header__circle",children:m(s.toBuy).length})]})]})]}),Object(d.jsx)("div",{className:"header__cover"})]})},N=function(){var e=Object(b.m)().pathname,t=e.split("/");return Object(d.jsxs)("div",{className:"navigation",children:[Object(d.jsx)(n.c,{to:"/",children:Object(d.jsx)("div",{className:"navigation__icon"})}),Object(d.jsxs)("div",{className:"navigation__location",children:[Object(d.jsx)("div",{className:"navigation__arrow"}),Object(d.jsx)(n.c,{className:h()("navigation__link",{"navigation__link--active":e.slice(1)===t[1]}),to:"/".concat(t[1]),children:t[1][0].toUpperCase()+t[1].slice(1)}),void 0!==t[2]&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"navigation__arrow"}),Object(d.jsx)("div",{className:h()("navigation__link",{"navigation__link--active":e.split("/")[2]===t[2]}),children:t[2][0].toUpperCase()+t[2].slice(1)})]})]})]})},y=function(){var e=Object(o.useState)(1),t=Object(r.a)(e,2),c=t[0],s=t[1],a=function(e,t,a){s(c===t?e:c+a)};return Object(o.useEffect)((function(){var e=setInterval((function(){s((function(e){return 3===e?1:e+1}))}),5e3);return function(){return clearTimeout(e)}}),[c]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"slider slider--photos",children:[Object(d.jsx)("button",{type:"button","aria-label":"Scroll left",className:"slider__button slider__button--photos",onClick:function(){return a(3,1,-1)}}),Object(d.jsx)("div",{className:"slider__container",children:[1,2,3].map((function(e){return Object(d.jsx)("div",{className:h()("slider__photo",{"slider__photo--active":e===c})})}))}),Object(d.jsx)("button",{type:"button","aria-label":"Scroll right",className:"slider__button slider__button--photos",onClick:function(){return a(1,3,1)}})]}),Object(d.jsxs)("div",{className:"slider__indicator_container",children:[Object(d.jsx)("div",{className:h()("slider__indicator",{"slider__indicator--active":1===c})}),Object(d.jsx)("div",{className:h()("slider__indicator",{"slider__indicator--active":2===c})}),Object(d.jsx)("div",{className:h()("slider__indicator",{"slider__indicator--active":3===c})})]})]})},g=c(7),k=c(9),S=c(5),C=c.n(S),B=(c(33),function(){return Object(d.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(d.jsx)("div",{className:"Loader__content"})})}),w=function(e){var t=!1;return m(s.toBuy).forEach((function(c){return c.id===e?t=!0:t})),t},A=function(e){var t=!1;return x(s.favourites).length>0&&x(s.favourites).map((function(c){return c.id===e?t=!0:t})),t},T=function(e,t,c,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;c.preventDefault();var n=0;if(x(s.favourites).map((function(e,t){return e.id===a.id&&(n=t),null})),!1===A(a.id)){var r=[].concat(Object(g.a)(x(s.favourites)),[a]);e(r),v(s.favourites,r)}else{t(n);var o=[].concat(Object(g.a)(x(s.favourites).slice(0,n)),Object(g.a)(x(s.favourites).slice(n+1)));e(o),setTimeout((function(){v(s.favourites,o),t(null)}),i)}},P=function(e,t,c){if(t.preventDefault(),!1===w(c.id)){var a=[].concat(Object(g.a)(m(s.toBuy)),[{id:c.id,quantity:1,item:c}]);O(s.toBuy,a),e(a)}},q=function(e){var t=e.product,c=e.favouritesTimeout,a=Object(o.useContext)(u),i=a.setChosenProducts,r=a.setProductsToBuy,l=a.setLoadingItem,j=!1,b=!1;return Object(o.useEffect)((function(){t&&(j=w(t.id),b=A(t.id))}),[t]),t&&Object(d.jsx)(n.b,{className:"product__link",to:"/".concat(t.type,"s/").concat(t.id),onClick:function(){localStorage.setItem(s.product,JSON.stringify(t))},children:t&&Object(d.jsxs)("div",{className:"product",children:[Object(d.jsx)("img",{className:"product__image",src:t.imageUrl.split("phones").join("products"),alt:"".concat(t.id)}),Object(d.jsx)("h3",{className:"product__title",children:t.name}),Object(d.jsx)("div",{className:"product__price_container",children:0===t.discount?Object(d.jsx)("div",{className:"product__price",children:"$".concat(t.price)}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"product__price",children:"$".concat(t.price-t.price*t.discount/100)}),Object(d.jsx)("div",{className:"product__price product__price--old",children:"$".concat(t.price)})]})}),Object(d.jsx)("div",{className:"product__line"}),Object(d.jsxs)("div",{className:"product__info_container",children:[Object(d.jsx)("div",{className:"product__info",children:"Screen"}),Object(d.jsx)("div",{className:"product__info--value",children:t.screen||"-"})]}),Object(d.jsxs)("div",{className:"product__info_container",children:[Object(d.jsx)("div",{className:"product__info",children:"Capacity"}),Object(d.jsx)("div",{className:"product__info--value",children:t.capacity||"-"})]}),Object(d.jsxs)("div",{className:"product__info_container product__info_container--last",children:[Object(d.jsx)("div",{className:"product__info",children:"RAM"}),Object(d.jsx)("div",{className:"product__info--value",children:t.ram||"-"})]}),Object(d.jsxs)("div",{className:"product__button_container",children:[Object(d.jsx)("button",{type:"button",className:h()("product__button_add",{"product__button_add--active":j}),onClick:function(e){return P(r,e,t)},children:j?"Added to cart":"Add to cart"}),Object(d.jsx)("button",{type:"button","aria-label":"favourites",className:h()("product__button_favourites",{"product__button_favourites--active":b}),onClick:function(e){return T(i,l,e,t,c)}})]})]})})};q.defaultProps={favouritesTimeout:0};var E="https://mate-academy.github.io/react_phone-catalog/api";function I(e){return new Promise((function(t){setTimeout(t,e)}))}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s={method:t};return c&&(s.body=JSON.stringify(c),s.headers={"Content-Type":"application/json; charset=UTF-8"}),I(300).then((function(){return fetch(E+e,s)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var L,R=function(e){return F(e)},G=function(){return R("/products.json")},$=function(e){var t=e.pathname,c=e.title,s=e.dicount,a=e.random,i=Object(o.useState)(0),n=Object(r.a)(i,2),l=n[0],u=n[1],j=Object(o.useState)(!1),b=Object(r.a)(j,2),_=b[0],p=b[1],O=Object(o.useState)(!1),m=Object(r.a)(O,2),v=m[0],x=m[1],f=Object(o.useState)([]),N=Object(r.a)(f,2),y=N[0],S=N[1],w=1200,A=275*y.length+25*(y.length-1),T=function(){var e=Object(k.a)(C.a.mark((function e(){var t,c,i,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),x(!1),e.prev=2,e.next=5,G();case 5:t=e.sent,s&&!a&&S(Object(g.a)(t).filter((function(e){return e.discount>0})).sort((function(e,t){return t.price-t.price*t.discount/100-(e.price-e.price*e.discount/100)}))),s||a||S(Object(g.a)(t).filter((function(e){return e.discount<=0})).sort((function(e,t){return t.price-e.price}))),!s&&a&&(c=[],i=t.length,n=Object(g.a)(Array(i)).map((function(e,t){return t})),Object(g.a)(Array(i)).map((function(){return n.splice(Math.floor(Math.random()*n.length),1)[0]})).map((function(e){return c.push(t[e])})),S(c)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),x(!1);case 14:return e.prev=14,p(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){T()}),[t]),Object(d.jsx)("div",{className:"slider slider--phones",children:Object(d.jsxs)("div",{className:"slider__content",children:[Object(d.jsxs)("div",{className:"slider__top",children:[Object(d.jsx)("h2",{className:"slider__subtitle",children:c}),Object(d.jsxs)("div",{className:"slider__button_container",children:[Object(d.jsx)("button",{type:"button","aria-label":"Left scroll",className:h()("slider__button slider__button--phones",{"slider__button--disabled":l>-1}),disabled:l>-1,onClick:function(){u(l+w)}}),Object(d.jsx)("button",{type:"button","aria-label":"Right scroll",className:h()("slider__button slider__button--phones",{"slider__button--disabled":l-w<-A}),disabled:l-w<-A,onClick:function(){if(1199<A){var e=l-w;e-w<=-A&&u(1199-A),u(e)}}})]})]}),_&&Object(d.jsx)(B,{}),v&&Object(d.jsx)("p",{children:"No phones"}),Object(d.jsx)("div",{className:"slider__container",children:Object(d.jsx)("div",{className:"slider__photos slider__photos--phones",style:{transform:"translate(".concat(l,"px, 0)"),transition:"transform 1.2s"},children:!_&&!v&&y.map((function(e){return Object(d.jsx)(q,{product:e})}))})})]})})},J=function(){var e=Object(o.useState)(0),t=Object(r.a)(e,2),c=t[0],s=t[1],a=Object(o.useState)(0),i=Object(r.a)(a,2),l=i[0],u=i[1],j=Object(o.useState)(0),b=Object(r.a)(j,2),_=b[0],h=b[1],p=function(){var e=Object(k.a)(C.a.mark((function e(t,c){var s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G();case 3:s=e.sent,t(Object(g.a)(s).filter((function(e){return e.type===c})).length),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){p(s,"phone"),p(u,"tablet"),p(h,"accessories")}),[]),Object(d.jsxs)("div",{className:"shopBy",children:[Object(d.jsx)("h2",{className:"shopBy__title",children:"Shop by category"}),Object(d.jsxs)("div",{className:"shopBy__content",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"shopBy__photo_container",children:Object(d.jsx)("div",{className:"shopBy__photo shopBy__photo--phones"})}),Object(d.jsx)(n.b,{className:"shopBy__link",to:"/phones",children:"Mobile phones"}),Object(d.jsxs)("div",{className:"shopBy__text",children:[c,1===c?"model":"models"]})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"shopBy__photo_container",children:Object(d.jsx)("div",{className:"shopBy__photo shopBy__photo--tablets"})}),Object(d.jsx)(n.b,{className:"shopBy__link",to:"/tablets",children:"Tablets"}),Object(d.jsxs)("div",{className:"shopBy__text",children:[l,1===l?"model":"models"]})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"shopBy__photo_container",children:Object(d.jsx)("div",{className:"shopBy__photo shopBy__photo--accessories"})}),Object(d.jsx)(n.b,{className:"shopBy__link",to:"/accessories",children:"Accessories"}),Object(d.jsxs)("div",{className:"shopBy__text",children:[_,1===_?"model":"models"]})]})]})]})},M=function(){var e=Object(b.m)().pathname;return Object(d.jsxs)("div",{className:"home",children:[Object(d.jsx)(y,{}),Object(d.jsx)($,{pathname:e,title:"Hot prices",dicount:!0,random:!1}),Object(d.jsx)(J,{}),Object(d.jsx)($,{pathname:e,title:"Brand new models",dicount:!1,random:!1})]})};function D(e,t){for(var c=[],s=e;s<=t;s+=1)c.push(s);return c}!function(e){e.newest="Newest",e.alphabetically="Alphabetically",e.cheapest="Cheapest"}(L||(L={}));var U=function(e){var t=e.productType;return Object(d.jsx)("h2",{className:"noResults",children:"".concat(t," not found")})},Q=function(e){var t=e.productType,c=e.type,s=e.page,a=e.perPage,i=e.sort,n=Object(o.useContext)(u).query,l=Object(b.m)().pathname,j=Object(o.useState)([]),_=Object(r.a)(j,2),O=_[0],m=_[1],v=Object(o.useState)(8),x=Object(r.a)(v,2),f=x[0],N=x[1],y=Object(o.useState)(1),S=Object(r.a)(y,2),w=S[0],A=S[1],T=Object(o.useState)(!1),P=Object(r.a)(T,2),E=P[0],I=P[1],F=Object(o.useState)(!1),R=Object(r.a)(F,2),$=R[0],J=R[1],M=Object(o.useState)("Newest"),Q=Object(r.a)(M,2),H=Q[0],z=Q[1],Y=Object(o.useState)(!1),K=Object(r.a)(Y,2),V=K[0],W=K[1],X=Object(o.useState)(!1),Z=Object(r.a)(X,2),ee=Z[0],te=Z[1],ce=Object(g.a)(O),se=0,ae=Object(g.a)(O),ie=p().updateSearch,ne=function(){var e=Object(k.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),te(!1),e.prev=2,e.next=5,G();case 5:t=e.sent,m(Object(g.a)(t).filter((function(e){return e.type===c}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),te(!1);case 12:return e.prev=12,W(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),re=function(e){A(e)},oe=function(e){z(e),I(!1),ie({sort:String(e.toLowerCase()),page:String(1)})},le=function(e){N(e),J(!1),A(1),ie({page:String(1),perPage:String(e)})};return Object(o.useEffect)((function(){return ne(),ie({page:null,perPage:null,sort:null})}),[l]),Object(o.useEffect)((function(){l&&(i&&z(i[0].toUpperCase()+i.slice(1)),s&&A(Number(s)),a&&N(Number(a)),I(!1),J(!1))}),[i,s,a,l]),n&&(ce=ce.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))),H===L.newest&&ce.sort((function(e,t){return e.age-t.age})),H===L.alphabetically&&ce.sort((function(e,t){return e.name.localeCompare(t.name)})),H===L.cheapest&&ce.sort((function(e,t){return e.price-t.price})),se=Math.ceil(ce.length/f),ae=Object(g.a)(ce).slice(f*w-f,f*w),Object(d.jsxs)("div",{className:"products",children:[Object(d.jsx)("h1",{className:"products__title",children:"".concat(t)}),V&&Object(d.jsx)("div",{className:"products__amount",children:"0 models"}),!V&&!ee&&Object(d.jsx)("div",{className:"products__amount",children:"".concat(O.length," models")}),Object(d.jsxs)("div",{className:"products__filter_container",children:[Object(d.jsxs)("div",{className:"products__filter",children:[Object(d.jsx)("div",{className:"products__text",children:"Sort by"}),Object(d.jsx)("button",{type:"button",className:"products__dropdown",onClick:function(){I(!E)},children:H}),Object(d.jsx)("div",{className:"products__cover"}),Object(d.jsxs)("ul",{className:h()("products__dropdown_list",{"products__dropdown_list--active":E}),children:[Object(d.jsx)("li",{className:"products__dropdown_item ",children:Object(d.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return oe(L.newest)},children:"Newest"})}),Object(d.jsx)("li",{className:"products__dropdown_item",children:Object(d.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return oe(L.alphabetically)},children:"Alphabetically"})}),Object(d.jsx)("li",{className:"products__dropdown_item",children:Object(d.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return oe(L.cheapest)},children:"Cheapest"})})]})]}),Object(d.jsxs)("div",{className:"products__filter",children:[Object(d.jsx)("div",{className:"products__text",children:"Items on page"}),Object(d.jsx)("button",{type:"button",className:"products__dropdown",onClick:function(){J(!$)},children:f}),Object(d.jsx)("div",{className:"products__cover"}),Object(d.jsxs)("ul",{className:h()("products__dropdown_list",{"products__dropdown_list--active":$}),children:[Object(d.jsx)("li",{className:"products__dropdown_item",children:Object(d.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return le(4)},children:"4"})}),Object(d.jsx)("li",{className:"products__dropdown_item",children:Object(d.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return le(8)},children:"8"})}),Object(d.jsx)("li",{className:"products__dropdown_item",children:Object(d.jsx)("button",{type:"button",className:"products__dropdown_button",onClick:function(){return le(16)},children:"16"})})]})]})]}),V&&Object(d.jsx)(B,{}),ee&&Object(d.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}),!V&&!ee&&ce.length>0&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"products__container",children:Object(d.jsx)("div",{className:"products__list",children:ae.map((function(e){return Object(d.jsx)(q,{product:e},e.id)}))})}),ce.length>f&&Object(d.jsxs)("div",{className:"products__page_container",children:[Object(d.jsx)("li",{className:"products__page",children:Object(d.jsx)("button",{type:"button","data-cy":"prevLink",className:h()("products__page_link",{"products__page_link--disabled":w<=1}),disabled:w<=1,onClick:function(e){e.preventDefault(),w>=2&&re(w-1),ie({page:String(w-1)})},children:"\xab"})}),D(1,se).map((function(e){return Object(d.jsx)("li",{className:"products__page",children:Object(d.jsx)("button",{type:"button","data-cy":"pageLink",className:h()("products__page_link",{"products__page_link--active":w===e}),onClick:function(t){t.preventDefault(),re(e),ie({page:String(e)})},children:e})},e)})),Object(d.jsx)("li",{className:"products__page",children:Object(d.jsx)("button",{type:"button","data-cy":"nextLink",className:h()("products__page_link",{"products__page_link--disabled":w>se-1}),disabled:w>se-1,"aria-disabled":w>se-1?"true":"false",onClick:function(e){e.preventDefault(),w<=se-1&&re(w+1),ie({page:String(w+1)})},children:"\xbb"})})]})]}),!V&&!ee&&0===ce.length&&Object(d.jsx)(U,{productType:t})]})},H=function(){var e=Object(b.o)();return Object(d.jsxs)("div",{className:"goGack",children:[Object(d.jsx)("div",{className:"goGack__arrow"}),Object(d.jsx)("button",{type:"button","data-cy":"backButton","aria-label":"Go back",className:"goGack__button",onClick:function(){return e(-1)},children:"Back"})]})},z=function(e){var t=e.favouritesTimeout,c=["#f0f0f0","#000","#62849c","#96999b"],a=Object(o.useContext)(u),i=a.setChosenProducts,n=a.setProductsToBuy,l=a.setLoadingItem,j=Object(b.m)().pathname,_=Object(o.useState)(!1),p=Object(r.a)(_,2),O=p[0],m=p[1],v=Object(o.useState)(!1),x=Object(r.a)(v,2),f=x[0],N=x[1],y=Object(o.useState)(null),g=Object(r.a)(y,2),S=g[0],q=g[1],E=Object(o.useState)(null===S||void 0===S?void 0:S.images[0]),I=Object(r.a)(E,2),F=I[0],L=I[1],G=Object(o.useState)(c[0]),J=Object(r.a)(G,2),M=J[0],D=J[1],U=Object(o.useState)(64),Q=Object(r.a)(U,2),z=Q[0],Y=Q[1],K=Object(o.useState)(!1),V=Object(r.a)(K,2),W=V[0],X=V[1],Z=JSON.parse(localStorage.getItem(s.product)),ee=null===S||void 0===S?void 0:S.display.screenResolution.slice((null===S||void 0===S?void 0:S.display.screenResolution.indexOf("("))+1,(null===S||void 0===S?void 0:S.display.screenResolution.length)-1),te=null===S||void 0===S?void 0:S.display.screenResolution.slice(0,null===S||void 0===S?void 0:S.display.screenResolution.indexOf("(")),ce=null===S||void 0===S?void 0:S.display.screenSize.slice(0,null===S||void 0===S?void 0:S.display.screenSize.indexOf(" ")),se=null===S||void 0===S?void 0:S.camera.primary.slice(0,null===S||void 0===S?void 0:S.camera.primary.indexOf(" ")),ae=function(e){return null===e||void 0===e?void 0:e.split("phones").join("products")},ie=function(){var e=Object(k.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),N(!1),e.prev=2,e.next=5,c=Z.id,R("/products/".concat(c,".json"));case 5:t=e.sent,q(t),L(ae(t.images[0])),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),N(!1);case 13:return e.prev=13,m(!1),e.finish(13);case 16:case"end":return e.stop()}var c}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){ie()}),[]),Object(d.jsxs)("div",{className:"details",children:[Object(d.jsx)(H,{}),Object(d.jsx)("h1",{className:"details__title",children:null===Z||void 0===Z?void 0:Z.name}),O&&Object(d.jsx)(B,{}),f&&Object(d.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}),!O&&!f&&Z&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"details__product",children:[Object(d.jsx)("div",{className:"details__photo_container",children:null===S||void 0===S?void 0:S.images.map((function(e){return Object(d.jsx)("button",{type:"button","aria-label":"image",className:h()("details__small_photo",{"details__small_photo--active":ae(e)===F}),style:{backgroundImage:"url(".concat(ae(e),")")},onClick:function(){L(ae(e))}},e)}))}),Object(d.jsx)("button",{type:"button","aria-label":"big image",className:h()("details__photo",{"details__photo--active":W}),style:{backgroundImage:"url(".concat(F,")")},onClick:function(){return X(!W)}}),Object(d.jsxs)("div",{className:"details__characteristics",children:[Object(d.jsx)("h6",{className:"details__subtitle",children:"Available colors"}),Object(d.jsx)("div",{className:"details__color_container",children:c.map((function(e){return Object(d.jsx)("button",{type:"button",className:"details__color_button",disabled:M===e,onClick:function(){return D(e)},children:Object(d.jsx)("div",{className:h()("details__color_border",{"details__color_border--active":M===e}),children:Object(d.jsx)("div",{className:"details__color",style:{backgroundColor:"".concat(e)}})})},e)}))}),Object(d.jsx)("div",{className:"details__line"}),Object(d.jsx)("h6",{className:"details__subtitle",children:"Select capacity"}),Object(d.jsxs)("div",{className:"details__capacity_container",children:[Object(d.jsx)("button",{type:"button",className:"details__capacity_button",onClick:function(){Y(64)},children:Object(d.jsx)("div",{className:h()("details__capacity",{"details__capacity--active":64===z}),children:"64 GB"})}),Object(d.jsx)("button",{type:"button",className:"details__capacity_button",onClick:function(){Y(256)},children:Object(d.jsx)("div",{className:h()("details__capacity",{"details__capacity--active":256===z}),children:"256 GB"})}),Object(d.jsx)("button",{type:"button",className:"details__capacity_button",onClick:function(){Y(512)},children:Object(d.jsx)("div",{className:h()("details__capacity",{"details__capacity--active":512===z}),children:"512 GB"})})]}),Object(d.jsx)("div",{className:"details__line"}),Object(d.jsxs)("div",{className:"details__price_container",children:[0===Z.discount&&Object(d.jsx)("div",{className:"details__price",children:"$".concat(Z.price)}),Z.price&&0!==Z.discount&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"details__price",children:"$".concat(Z.price-Z.price*Z.discount/100)}),Object(d.jsx)("div",{className:"details__price_old",children:"$".concat(Z.price)})]})]}),Object(d.jsxs)("div",{className:"details__button_container",children:[Object(d.jsx)("button",{type:"button",className:h()("details__button_add",{"details__button_add--active":!0===w(Z.id)}),onClick:function(e){return P(n,e,Z)},children:!0===w(Z.id)?"Added to cart":"Add to cart"}),Object(d.jsx)("button",{type:"button","aria-label":"favourites",className:h()("details__button_favourites",{"details__button_favourites--active":A(Z.id)}),onClick:function(e){return T(i,l,e,Z,t)}})]}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"details__description_container",children:[Object(d.jsx)("div",{className:"details__description",children:"Screen"}),Object(d.jsx)("div",{className:"details__value",children:"".concat(te," ").concat(ce)||"-"})]}),Object(d.jsxs)("div",{className:"details__description_container",children:[Object(d.jsx)("div",{className:"details__description",children:"Resolution"}),Object(d.jsx)("div",{className:"details__value",children:ee||"-"})]}),Object(d.jsxs)("div",{className:"details__description_container",children:[Object(d.jsx)("div",{className:"details__description",children:"Processor"}),Object(d.jsx)("div",{className:"details__value",children:(null===S||void 0===S?void 0:S.hardware.cpu)||"-"})]}),Object(d.jsxs)("div",{className:"details__description_container",children:[Object(d.jsx)("div",{className:"details__description",children:"RAM"}),Object(d.jsx)("div",{className:"details__value",children:(null===S||void 0===S?void 0:S.storage.ram)||"-"})]})]})]}),Object(d.jsx)("div",{className:"details__id",children:"ID: 802390"}),Object(d.jsxs)("div",{className:"details__about",children:[Object(d.jsx)("div",{className:"details__about_title",children:"About"}),Object(d.jsx)("div",{className:"details__line"}),(null===S||void 0===S?void 0:S.additionalFeatures)&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"details__about_subtitle",children:"Additional Features"}),Object(d.jsx)("p",{className:"details__about_text",children:null===S||void 0===S?void 0:S.additionalFeatures})]}),(null===S||void 0===S?void 0:S.description)&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"details__about_subtitle",children:"Description"}),Object(d.jsx)("p",{className:"details__about_text",children:null===S||void 0===S?void 0:S.description})]})]}),Object(d.jsxs)("div",{className:"details__about--techSpecs",children:[Object(d.jsx)("div",{className:"details__about_title",children:"Tech specs"}),Object(d.jsx)("div",{className:"details__line"}),Object(d.jsxs)("div",{className:"details__about_specs",children:[Object(d.jsxs)("div",{className:"details__about_container",children:[Object(d.jsx)("div",{className:"details__about_spec",children:"Screen"}),Object(d.jsx)("div",{className:"details__about_value",children:"".concat(te," ").concat(ce)||"-"})]}),Object(d.jsxs)("div",{className:"details__about_container",children:[Object(d.jsx)("div",{className:"details__about_spec",children:"Resolution"}),Object(d.jsx)("div",{className:"details__about_value",children:ee||"-"})]}),Object(d.jsxs)("div",{className:"details__about_container",children:[Object(d.jsx)("div",{className:"details__about_spec",children:"Processor"}),Object(d.jsx)("div",{className:"details__about_value",children:(null===S||void 0===S?void 0:S.hardware.cpu)||"-"})]}),Object(d.jsxs)("div",{className:"details__about_container",children:[Object(d.jsx)("div",{className:"details__about_spec",children:"RAM"}),Object(d.jsx)("div",{className:"details__about_value",children:(null===S||void 0===S?void 0:S.storage.ram)||"-"})]}),Object(d.jsxs)("div",{className:"details__about_container",children:[Object(d.jsx)("div",{className:"details__about_spec",children:"Built in memory"}),Object(d.jsx)("div",{className:"details__about_value",children:(null===S||void 0===S?void 0:S.storage.flash)||"-"})]}),Object(d.jsxs)("div",{className:"details__about_container",children:[Object(d.jsx)("div",{className:"details__about_spec",children:"Camera"}),Object(d.jsx)("div",{className:"details__about_value",children:"".concat(se," Mp")||!1})]})]})]})]}),Object(d.jsx)($,{pathname:j,title:"You may also like",dicount:!1,random:!0})]}),!O&&!f&&!Z&&Object(d.jsx)("h3",{children:"No product"}),Object(d.jsx)("div",{className:h()("details__cover",{"details__cover--active":!0===W})})]})};z.defaultProps={favouritesTimeout:0};var Y,K,V=function(){var e=Object(o.useContext)(u),t=e.loadingItem,c=e.query,a=Object(o.useState)(!1),i=Object(r.a)(a,2),n=i[0],l=i[1],j=x(s.favourites).filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())}));return Object(o.useEffect)((function(){l(!0),setTimeout((function(){l(!1)}),500)}),[]),Object(d.jsxs)("div",{className:"favourites",children:[Object(d.jsx)("h1",{className:"favourites__title",children:"Favourites"}),n?Object(d.jsx)("div",{className:"favourites__amount",children:"0 models"}):Object(d.jsx)("div",{className:"favourites__amount",children:1!==j.length?"".concat(j.length," models"):"".concat(j.length," model")}),Object(d.jsx)("div",{className:"favourites__container",children:Object(d.jsxs)("div",{className:"favourites__list",children:[n&&Object(d.jsx)("div",{className:"favourites__loader_container",children:Object(d.jsx)(B,{})}),j.length>0&&!n&&j.map((function(e,c){return c!==t?Object(d.jsx)(q,{product:e,favouritesTimeout:1e3},e.id):Object(d.jsxs)("div",{className:"favourites__list_container",children:[Object(d.jsx)(q,{product:e},e.id),Object(d.jsx)("div",{className:"favourites__list_loader",children:Object(d.jsx)(B,{})})]})})),0===x(s.favourites).length&&!n&&Object(d.jsx)("h2",{className:"favourites__title favourites__title--error",children:"Favourites not found"})]})})]})},W=c(25),X=function(){var e=Object(o.useContext)(u),t=e.setProductsToBuy,c=e.loadingItem,a=e.setLoadingItem,i=Object(o.useState)(!1),n=Object(r.a)(i,2),l=n[0],j=n[1],b=function(e){a(e),setTimeout((function(){var c=[].concat(Object(g.a)(m(s.toBuy).slice(0,e)),Object(g.a)(m(s.toBuy).slice(e+1)));O(s.toBuy,c),t(c),a(null)}),1e3)},_=function(e,c,a){var i=Object(W.a)(Object(W.a)({},a),{},{quantity:c}),n=[].concat(Object(g.a)(m(s.toBuy).slice(0,e)),[i],Object(g.a)(m(s.toBuy).slice(e+1)));O(s.toBuy,n),t(n)},p=function(e,t){return e-e*t/100},v=function(){var e=0;return m(s.toBuy).forEach((function(t){e+=t.quantity})),e};return Object(o.useEffect)((function(){j(!0),setTimeout((function(){j(!1)}),500)}),[]),Object(d.jsxs)("div",{className:"cart",children:[Object(d.jsx)(H,{}),Object(d.jsx)("h1",{className:"cart__title",children:"Cart"}),l&&Object(d.jsx)("div",{className:"cart__loader_container",children:Object(d.jsx)(B,{})}),m(s.toBuy).length>0&&!l&&Object(d.jsxs)("div",{className:"cart__container",children:[Object(d.jsx)("div",{className:"cart__products",children:m(s.toBuy).map((function(e,t){return t!==c?Object(d.jsxs)("div",{className:"cart__item",children:[Object(d.jsxs)("div",{className:"cart__content",children:[Object(d.jsx)("button",{type:"button","aria-label":"Delete",className:"cart__button",onClick:function(){return b(t)}}),Object(d.jsx)("img",{className:"cart__image",src:e.item.imageUrl.split("phones").join("products"),alt:"".concat(e.item.id)}),Object(d.jsx)("h4",{className:"cart__subtitle",children:e.item.name})]}),Object(d.jsxs)("div",{className:"cart__amount",children:[Object(d.jsxs)("div",{className:"cart__quantity",children:[Object(d.jsx)("button",{type:"button","aria-label":"Remove",className:h()("cart__changeAmount cart__remove",{"cart__changeAmount--disabled":e.quantity<2}),disabled:e.quantity<2,onClick:function(){return _(t,e.quantity-1,e)}}),Object(d.jsx)("div",{className:"cart__number",children:e.quantity}),Object(d.jsx)("button",{type:"button","aria-label":"Add",className:h()("cart__changeAmount cart__add",{"cart__changeAmount--disabled":e.quantity>4}),disabled:e.quantity>4,onClick:function(){return _(t,e.quantity+1,e)}})]}),0===e.item.discount?Object(d.jsx)("div",{className:"cart__price",children:"$".concat(e.item.price)}):Object(d.jsx)("div",{className:"cart__price",children:"$".concat(p(e.item.price,e.item.discount))})]})]}):Object(d.jsxs)("div",{className:"cart__list_container",children:[Object(d.jsxs)("div",{className:"cart__item",children:[Object(d.jsxs)("div",{className:"cart__content",children:[Object(d.jsx)("button",{type:"button","aria-label":"Delete",className:"cart__button",onClick:function(){return b(t)}}),Object(d.jsx)("img",{className:"cart__image",src:e.item.imageUrl.split("phones").join("products"),alt:"".concat(e.item.id)}),Object(d.jsx)("h4",{className:"cart__subtitle",children:e.item.name})]}),Object(d.jsxs)("div",{className:"cart__amount",children:[Object(d.jsxs)("div",{className:"cart__quantity",children:[Object(d.jsx)("button",{type:"button","aria-label":"Remove",className:h()("cart__changeAmount cart__remove",{"cart__changeAmount--disabled":e.quantity<2}),disabled:e.quantity<2,onClick:function(){return _(t,e.quantity-1,e)}}),Object(d.jsx)("div",{className:"cart__number",children:e.quantity}),Object(d.jsx)("button",{type:"button","aria-label":"Add",className:h()("cart__changeAmount cart__add",{"cart__changeAmount--disabled":e.quantity>4}),disabled:e.quantity>4,onClick:function(){return _(t,e.quantity+1,e)}})]}),0===e.item.discount?Object(d.jsx)("div",{className:"cart__price",children:"$".concat(e.item.price)}):Object(d.jsx)("div",{className:"cart__price",children:"$".concat(p(e.item.price,e.item.discount))})]})]}),Object(d.jsx)("div",{className:"cart__list_loader",children:Object(d.jsx)(B,{})})]})}))}),Object(d.jsxs)("div",{className:"cart__checkout",children:[Object(d.jsx)("h2",{className:"cart__totalCost",children:"$".concat(function(){var e=0;return m(s.toBuy).forEach((function(t){0===t.item.discount?e+=t.item.price*t.quantity:e+=p(t.item.price,t.item.discount)*t.quantity})),e}())}),Object(d.jsx)("div",{className:"cart__totalQuantity",children:"Total for ".concat(v()," ").concat(1===v()?"item":"items")}),Object(d.jsx)("div",{className:"cart__line"}),Object(d.jsx)("button",{type:"button","aria-label":"checkout",className:"cart__mainButton",children:"Checkout"})]})]}),0===m(s.toBuy).length&&!l&&Object(d.jsx)("h2",{className:"cart__title cart__title--error",children:"Products not found"})]})},Z=function(){return Object(d.jsxs)("footer",{className:"footer",children:[Object(d.jsx)("div",{className:"footer__content",children:Object(d.jsx)("div",{className:"footer__image"})}),Object(d.jsx)("div",{className:"footer__content",children:Object(d.jsxs)("div",{className:"footer__link_container",children:[Object(d.jsx)(n.b,{to:"/",className:"footer__link",children:"GITHUB"}),Object(d.jsx)(n.b,{to:"/",className:"footer__link",children:"CONTACTS"}),Object(d.jsx)(n.b,{to:"/",className:"footer__link",children:"RIGHTS"})]})}),Object(d.jsxs)("div",{className:"footer__button_container",children:[Object(d.jsx)("div",{className:"footer__content",children:Object(d.jsx)("div",{className:"footer__button_text",children:"Back to top"})}),Object(d.jsx)("button",{type:"button","aria-label":"Scroll top",className:"footer__button"})]})]})};!function(e){e.phones="Mobile Phones",e.tablets="Tablets",e.accessories="Accessories"}(Y||(Y={})),function(e){e.page="page",e.perPage="perPage",e.sort="sort",e.query="query"}(K||(K={}));var ee=function(){var e=Object(o.useContext)(u).setQuery,t=Object(b.m)().pathname,c=Object(b.o)(),a=p(),i=a.updateSearch,n=a.searchParams,l=Object(o.useState)(""),j=Object(r.a)(l,2),_=j[0],h=j[1],O=n.get(K.page)||"",m=n.get(K.perPage)||"",v=n.get(K.sort)||"",x=n.get(K.query)||"",y=JSON.parse(localStorage.getItem(s.product))||null;return Object(o.useEffect)((function(){h("/phones"===t?"phones":"/tablets"===t?"tablets":"/accessories"===t?"accessories":"/favourites"===t?"favourites":""),e(""),i({query:null}),c(-1)}),[t]),Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)(f,{filterType:_,filterQuery:x}),Object(d.jsx)("main",{style:{flexGrow:1},children:Object(d.jsxs)(b.d,{children:[Object(d.jsx)(b.b,{path:"/",element:Object(d.jsx)(M,{})}),Object(d.jsx)(b.b,{path:"/home",element:Object(d.jsx)(b.a,{to:"/",replace:!0})}),Object(d.jsx)(b.b,{path:"/phones",element:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsx)(Q,{productType:Y.phones,type:"phone",page:O,sort:v,perPage:m})]})}),Object(d.jsx)(b.b,{path:"/phones/:".concat(null===y||void 0===y?void 0:y.id),element:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsx)(z,{})]})}),Object(d.jsx)(b.b,{path:"/tablets",element:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsx)(Q,{productType:Y.tablets,type:"tablet",page:O,sort:v,perPage:m})]})}),Object(d.jsx)(b.b,{path:"/tablets/:".concat(null===y||void 0===y?void 0:y.id),element:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsx)(z,{})]})}),Object(d.jsx)(b.b,{path:"/accessories",element:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsx)(Q,{productType:Y.accessories,type:"accessory",page:O,sort:v,perPage:m})]})}),Object(d.jsx)(b.b,{path:"/accessories/:".concat(null===y||void 0===y?void 0:y.id),element:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsx)(z,{})]})}),Object(d.jsx)(b.b,{path:"/favourites",element:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsx)(V,{})]})}),Object(d.jsx)(b.b,{path:"/cart",element:Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(X,{})})}),Object(d.jsx)(b.b,{path:"/*",element:Object(d.jsx)("p",{children:"Page not found"})})]})}),Object(d.jsx)(Z,{})]})};c(34);i.a.render(Object(d.jsx)(n.a,{children:Object(d.jsx)(j,{children:Object(d.jsx)(ee,{})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.e99c59c8.chunk.js.map